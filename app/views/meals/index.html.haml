%h3 Meals

.row.well 
  %i
    = date_range(current_page).map { |d| l d, format: :friendly }.join (" => ")
.row
  .span3.offset1 Meal
  .span2.offset1 Chef
  .span2 Dishwasher
- @meals.each do |meal|
  .row.item
    .span1= l meal.day, format: :terse
    .span4
      = link_to meal.name, meal_path(meal)
      (#{meal.meal.titleize})
    .span2.chef= meal.chef
    .span2.dishwasher= meal.dishwasher
    .span2.tools
      #{link_to "Edit", edit_meal_path(meal)} |
      #{link_to "Delete", meal_path(meal), method: :delete, confirm: "Are you sure you want to delete this meal?"}

.row.tools.well
  = link_to "Add Meal", new_meal_path, class: "btn btn-success"
  = link_to " Plan for: #{first_unplanned_week.minmax.join(" => ")}", '/plan/new', class: "btn btn-success"
  - date_pager(prev: "Previous", next: "Next") do | label , url, classname |
    - label = date_range(label).join (" => ") if label.is_a? Integer

    - if ! current_page?(url)
      = link_to label, url, class: "btn #{classname}"
    - else
      = button_tag label, class: "btn #{classname} current disabled"
#new_meal_form.hidden
  %h3
    New Meal
  .row
    .span12
      = render "form"